# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: create-role-associations
description: Creates role associations of given IAM role with EMR service accounts.
flags:
  --cluster-name=!: Specify the name of the Amazon EKS cluster with which the IAM Role would be associated.
  --namespace=!: Specify the job/application namespace from the Amazon EKS cluster with which the IAM Role would be associated.
  --role-name=!: Specify the IAM Role name that you want to associate with Amazon EMR on EKS.
  --type=: Specify the Amazon EMR on EKS submission model and choose service accounts that you want to associate with Amazon EMR on EKS.
  --operator-namespace=: Specify the namespace that you want to associate the operator service account with the IAM role.
  --service-account-name=: Specify the service account name that you want to associate with the IAM role.
completion:
  flag:
    type:
      - start_job_run
      - interactive_endpoint
      - spark_operator
      - flink_operator
      - livy
documentation:
  command: |
    Creates role associations of given IAM role with EMR service accounts such that
    it can be used with Amazon EMR on EKS with the given namespace from the given EKS cluster.

    Note: The command would associate EMR service accounts with provided IAM role to EKS pod identity:

    - “emr-containers-sa-%(FRAMEWORK)s-%(COMPONENT)s-%(AWS_ACCOUNT_ID)s-%(BASE36_ENCODED_ROLE_NAME)s”
