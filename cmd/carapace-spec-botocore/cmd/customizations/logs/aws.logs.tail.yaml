# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: tail
description: Tails the logs for a CloudWatch Logs group
flags:
  --since=: From what time to begin displaying logs
  --follow: Whether to continuously poll for new logs
  --format=: The format to display the logs
  --filter-pattern=: The filter pattern to use
  --log-stream-names=: The list of stream names to filter logs by
  --log-stream-name-prefix=: The prefix to filter logs by
completion:
  flag:
    format:
      - "detailed\tThis the default format"
      - "short\tA shortened format"
      - "json\tPretty print any messages that are entirely JSON"
documentation:
  command: |
    Tails the logs for a CloudWatch Logs group.
    By default, the command returns logs from all associated CloudWatch Logs streams during the past ten minutes.
    Note that there is no guarantee for exact timestamp ordering of logs.
  flag:
    since: |
      From what time to begin displaying logs.
      By default, logs will be displayed starting from ten minutes in the past.
      The value provided can be an ISO 8601 timestamp or a relative time.
      For relative times, provide a number and a single unit.

      Supported units include:
      - `s` - seconds
      - `m` - minutes
      - `h` - hours
      - `d` - days
      - `w` - weeks

      For example, a value of 5m would indicate to display logs starting five minutes in the past.
      Note that multiple units are not supported (i.e. 5h30m)
    follow: |
      Whether to continuously poll for new logs.
      By default, the command will exit once there are no more logs to display.
      To exit from this mode, use Control-C.
    format: |
      The format to display the logs.

      The following formats are supported:
      - detailed - This the default format. It prints out the timestamp with millisecond precision and timezones, the log stream name, and the log message.
      - short - A shortened format. It prints out the a shortened timestamp and the log message.
      - json - Pretty print any messages that are entirely JSON.
    filter-pattern: |
      The filter pattern to use.
      See Filter and Pattern Syntax for details.
      If not provided, all the events are matched
    log-stream-names: |
      The list of stream names to filter logs by.
      This parameter cannot be specified when --log-stream-name-prefix is also specified.
    log-stream-name-prefix: |
      The prefix to filter logs by.
      Only events from log streams with names beginning with this prefix will be returned.
      This parameter cannot be specified when log-stream-names is also specified.
