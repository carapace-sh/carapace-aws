# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: kinesis-video-archived-media
description: Amazon Kinesis Video Streams Archived Media
commands:
    - name: get-clip
      description: Downloads an MP4 file (clip) containing the archived, on-demand media from the specified video stream over the specified time range.
      flags:
        --clip-fragment-selector=!: The time range of the requested clip and the source of the timestamps.
        --stream-arn=: The Amazon Resource Name (ARN) of the stream for which to retrieve the media clip.
        --stream-name=: The name of the stream for which to retrieve the media clip.
      completion:
        positional:
            - - $files
    - name: get-dash-streaming-session-url
      description: Retrieves an MPEG Dynamic Adaptive Streaming over HTTP (DASH) URL for the stream.
      flags:
        --cli-input-json=: Read arguments from the JSON string provided.
        --cli-input-yaml=: Read arguments from the YAML string provided.
        --dash-fragment-selector=: The time range of the requested fragment and the source of the timestamps.
        --display-fragment-number=: Fragments are identified in the manifest file based on their sequence number in the session.
        --display-fragment-timestamp=: Per the MPEG-DASH specification, the wall-clock time of fragments in the manifest file can be derived using attributes in the manifest itself.
        --expires=: The time in seconds until the requested session expires.
        --generate-cli-skeleton: Prints a JSON skeleton to standard output without sending an API request.
        --max-manifest-fragment-results=: The maximum number of fragments that are returned in the MPEG-DASH manifest.
        --playback-mode=: Whether to retrieve live, live replay, or archived, on-demand data.
        --stream-arn=: The Amazon Resource Name (ARN) of the stream for which to retrieve the MPEG-DASH manifest URL.
        --stream-name=: The name of the stream for which to retrieve the MPEG-DASH manifest URL.
      completion:
        flag:
            display-fragment-number:
                - ALWAYS
                - NEVER
            display-fragment-timestamp:
                - ALWAYS
                - NEVER
            playback-mode:
                - LIVE
                - LIVE_REPLAY
                - ON_DEMAND
    - name: get-hls-streaming-session-url
      description: Retrieves an HTTP Live Streaming (HLS) URL for the stream.
      flags:
        --cli-input-json=: Read arguments from the JSON string provided.
        --cli-input-yaml=: Read arguments from the YAML string provided.
        --container-format=: Specifies which format should be used for packaging the media.
        --discontinuity-mode=: Specifies when flags marking discontinuities between fragments are added to the media playlists.
        --display-fragment-timestamp=: Specifies when the fragment start timestamps should be included in the HLS media playlist.
        --expires=: The time in seconds until the requested session expires.
        --generate-cli-skeleton: Prints a JSON skeleton to standard output without sending an API request.
        --hls-fragment-selector=: The time range of the requested fragment and the source of the timestamps.
        --max-media-playlist-fragment-results=: The maximum number of fragments that are returned in the HLS media playlists.
        --playback-mode=: Whether to retrieve live, live replay, or archived, on-demand data.
        --stream-arn=: The Amazon Resource Name (ARN) of the stream for which to retrieve the HLS master playlist URL.
        --stream-name=: The name of the stream for which to retrieve the HLS master playlist URL.
      completion:
        flag:
            container-format:
                - FRAGMENTED_MP4
                - MPEG_TS
            discontinuity-mode:
                - ALWAYS
                - NEVER
                - ON_DISCONTINUITY
            display-fragment-timestamp:
                - ALWAYS
                - NEVER
            playback-mode:
                - LIVE
                - LIVE_REPLAY
                - ON_DEMAND
    - name: get-images
      description: Retrieves a list of images corresponding to each timestamp for a given time range, sampling interval, and image format configuration.
      flags:
        --cli-input-json=: Read arguments from the JSON string provided.
        --cli-input-yaml=: Read arguments from the YAML string provided.
        --end-timestamp=!: The end timestamp for the range of images to be generated.
        --format-config=: The list of a key-value pair structure that contains extra parameters that can be applied when the image is generated.
        --format=!: The format that will be used to encode the image.
        --generate-cli-skeleton: Prints a JSON skeleton to standard output without sending an API request.
        --height-pixels=: The height of the output image that is used in conjunction with the `WidthPixels` parameter.
        --image-selector-type=!: The origin of the Server or Producer timestamps to use to generate the images.
        --max-items=: The  total number of items to return in the command's output.
        --max-results=: The maximum number of images to be returned by the API.
        --next-token=: A token that specifies where to start paginating the next set of Images.
        --page-size=: The size of each page to get in the AWS service call.
        --sampling-interval=: The time interval in milliseconds (ms) at which the images need to be generated from the stream.
        --start-timestamp=!: The starting point from which the images should be generated.
        --starting-token=: A token to specify where to start paginating.
        --stream-arn=: The Amazon Resource Name (ARN) of the stream from which to retrieve the images.
        --stream-name=: The name of the stream from which to retrieve the images.
        --width-pixels=: The width of the output image that is used in conjunction with the `HeightPixels` parameter.
      completion:
        flag:
            format:
                - JPEG
                - PNG
            image-selector-type:
                - PRODUCER_TIMESTAMP
                - SERVER_TIMESTAMP
    - name: get-media-for-fragment-list
      description: Gets media for a list of fragments (specified by fragment number) from the archived data in an Amazon Kinesis video stream.
      flags:
        --fragments=!:
            description: A list of the numbers of fragments for which to retrieve media.
            nargs: -1
        --stream-arn=: The Amazon Resource Name (ARN) of the stream from which to retrieve fragment media.
        --stream-name=: The name of the stream from which to retrieve fragment media.
      completion:
        positional:
            - - $files
    - name: list-fragments
      description: Returns a list of [Fragment]() objects from the specified stream and timestamp range within the archived data.
      flags:
        --cli-input-json=: Read arguments from the JSON string provided.
        --cli-input-yaml=: Read arguments from the YAML string provided.
        --fragment-selector=: Describes the timestamp range and timestamp origin for the range of fragments to return.
        --generate-cli-skeleton: Prints a JSON skeleton to standard output without sending an API request.
        --max-items=: The  total number of items to return in the command's output.
        --max-results=: The total number of fragments to return.
        --next-token=: A token to specify where to start paginating.
        --page-size=: The size of each page to get in the AWS service call.
        --starting-token=: A token to specify where to start paginating.
        --stream-arn=: The Amazon Resource Name (ARN) of the stream from which to retrieve a fragment list.
        --stream-name=: The name of the stream from which to retrieve a fragment list.
